{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Transaction History</title>
  <link rel="stylesheet" href="{% static 'css/history.css' %}">
  <link rel="icon" type="image/png" href="{% static 'images/pmgi.png' %}">
</head>
<body>
  <header class="page-header">
    <div class="header-left">
      <span class="company-name">PROFESSIONAL MAINTENANCE GROUP, INC. - PMG TIME CENTRAL</span>
    </div>
    <div class="header-right">
      <img src="{% static 'images/pmgi.png' %}" alt="Logo 1" class="header-logo">
      <img src="{% static 'images/sgslogos.png' %}" alt="Logo 2" class="header-logo">
    </div>
  </header>
<div class="main-layout">
  <aside class="sidebar">
    <h3>ðŸ“‚ Actions</h3>
    <a href="{% url 'admin_dashboard' %}" class="dashboard-btn">â¬… Back to Dashboard</a>
    <a href="{% url 'accounts_list' %}" class="account-btn">ðŸ‘¥ Accounts</a>
    <a href="{% url 'transaction_history' %}" class="transaction-btn">ðŸ“œ History</a>

    <div class="sidebar-footer">
    <p>Welcome, <strong>{{ request.user.username }}</strong></p>
        <div class="header-buttons">
            <a href="{% url 'logout' %}" class="logout-btn">Logout</a>
        </div>
    </div>
  </aside>

  <div class="dashboard-container">
    <div class="dashboard-header">
      <div class="header-left">
        <h1>ðŸ“œ Transaction History</h1>
      </div>
    </div>
    <hr>
    <section class="history-section">
      <h3>Uploaded Files</h3>
      <div style="max-height: 300px; overflow-y: auto; border: 1px solid #ccc;">
        <table>
          <thead>
            <tr>
              <th>Filename</th>
              <th>Uploaded By</th>
              <th>Upload Date</th>
            </tr>
          </thead>
          <tbody>
            {% for upload in uploads %}
            <tr>
              <td>{{ upload.original_filename }}</td>
              <td>{{ upload.uploaded_by.username }}</td>
              <td>{{ upload.uploaded_at|date:"Y-m-d H:i" }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="3">No uploads found.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>
    
    <section class="history-section" style="margin-top: 40px; max-height: 400px; overflow-y: auto; width: 100%;">
      <h3>User Login Sessions</h3>
      <table>
        <thead>
          <tr>
            <th>Username</th>
            <th>Login Time</th>
            <th>Logout Time</th>
          </tr>
        </thead>
        <tbody>
          {% for session in sessions %}
          <tr>
            <td>{{ session.user.username }}</td>
            <td>{{ session.login_time|date:"Y-m-d H:i" }}</td>
            <td>{% if session.logout_time %}{{ session.logout_time|date:"Y-m-d H:i" }}{% else %}--{% endif %}</td>
          </tr>
          {% empty %}
          <tr><td colspan="3">No session history found.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </section>
  </div>
</div>
</body>
</html>